<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Invitation</title>

  <!-- Polices (fonctionne si la personne a internet) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Inter:wght@200;300;400&display=swap" rel="stylesheet">

  <style>
    :root{
      --ink: #000000;
      --accent: #FF5C00;
      --paper: #FEFEFE;
    }

    *{ box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    html, body { height: 100%; margin: 0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }

    /* === SC√àNE CIEL === */
    .scene{
      height: 100%;
      overflow: hidden;
      position: relative;
      background:
        radial-gradient(1200px 600px at 30% 20%, rgba(255,255,255,.9), rgba(255,255,255,0) 60%),
        radial-gradient(1000px 500px at 70% 35%, rgba(255,255,255,.75), rgba(255,255,255,0) 62%),
        linear-gradient(#8ec5ff 0%, #cfe9ff 55%, #eaf6ff 100%);
      display: grid;
      place-items: center;
      padding: 18px;
    }

    /* nuages anim√©s */
    .clouds, .clouds:before, .clouds:after{
      content:"";
      position:absolute;
      inset:-20%;
      background:
        radial-gradient(110px 55px at 20% 25%, rgba(255,255,255,.65), rgba(255,255,255,0) 70%),
        radial-gradient(140px 70px at 38% 30%, rgba(255,255,255,.55), rgba(255,255,255,0) 72%),
        radial-gradient(160px 80px at 65% 35%, rgba(255,255,255,.5), rgba(255,255,255,0) 72%),
        radial-gradient(120px 60px at 80% 28%, rgba(255,255,255,.55), rgba(255,255,255,0) 72%);
      filter: blur(1px);
      opacity:.9;
      animation: drift 18s linear infinite;
      pointer-events:none;
    }
    .clouds:before{ opacity:.65; animation-duration: 26s; transform: translateX(-8%); }
    .clouds:after{ opacity:.5;  animation-duration: 34s; transform: translateX(10%); }
    @keyframes drift{
      0%{ transform: translateX(-6%) translateY(0); }
      50%{ transform: translateX(6%) translateY(-2%); }
      100%{ transform: translateX(-6%) translateY(0); }
    }

    /* texte discret en haut */
    .hint{
      position: absolute;
      top: max(14px, env(safe-area-inset-top));
      left: 0; right: 0;
      text-align: center;
      font-size: 13px;
      letter-spacing: .2px;
      color: rgba(255,255,255,.85);
      text-shadow: 0 1px 10px rgba(0,0,0,.25);
      user-select: none;
      padding: 0 14px;
    }

    /* === ENVELOPPE === */
    .stage{
      width: min(360px, 92vw);
      height: 280px;
      position: relative;
      display: grid;
      place-items: center;
      perspective: 900px;
    }

    .envelope-wrap{
      width: min(340px, 90vw);
      height: 220px;
      position: relative;
      transform: translateZ(0);
      filter: drop-shadow(0 18px 32px rgba(0,0,0,.25));
      cursor: pointer;
      user-select: none;
      touch-action: manipulation;
    }

    .envelope{
      width: 100%;
      height: 100%;
      position: relative;
      background:
        linear-gradient(135deg, transparent 0%, rgba(0,0,0,.02) 100%),
        linear-gradient(180deg, #e8dcc8 0%, #dbc9af 100%);
      overflow: hidden;
    }

    .envelope:after{
      content:"";
      position:absolute;
      inset: 0;
      background-image:
        repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,.015) 2px, rgba(0,0,0,.015) 4px),
        repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0,0,0,.015) 2px, rgba(0,0,0,.015) 4px);
      pointer-events:none;
      opacity: .6;
    }

    .flap{
      position:absolute;
      left: 0; right: 0;
      top: 0;
      height: 60%;
      transform-origin: top center;
      transform: rotateX(0deg);
      transition: transform 900ms cubic-bezier(.2,.9,.2,1);
      z-index: 4;
    }
    .flap:before{
      content:"";
      position:absolute;
      left: 0; right: 0; top: 0;
      margin: auto;
      width: 100%;
      height: 100%;
      background:
        linear-gradient(180deg, rgba(0,0,0,.03) 0%, transparent 15%),
        linear-gradient(180deg, #f0e5d3 0%, #e0d0b8 100%);
      clip-path: polygon(0 0, 100% 0, 50% 100%);
      box-shadow: 0 2px 0 rgba(0,0,0,.08);
    }
    .flap:after{
      content:"";
      position:absolute;
      left: 0; right: 0; top: 0;
      width: 100%;
      height: 100%;
      clip-path: polygon(0 0, 100% 0, 50% 100%);
      background-image:
        repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,.02) 2px, rgba(0,0,0,.02) 4px),
        repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0,0,0,.02) 2px, rgba(0,0,0,.02) 4px);
      pointer-events:none;
      opacity: .5;
    }

    .side{
      position:absolute;
      inset: 0;
      z-index: 2;
    }
    .side:before,
    .side:after{
      content:"";
      position:absolute;
      top: 36%;
      width: 60%;
      height: 70%;
      background: linear-gradient(180deg, #ded1bb 0%, #cebca3 100%);
      opacity:.98;
    }
    .side:before{
      left: -5%;
      clip-path: polygon(0 0, 100% 50%, 0 100%);
      box-shadow:
        inset -8px 0 16px rgba(0,0,0,.12),
        inset 0 8px 8px rgba(0,0,0,.06);
    }
    .side:after{
      right: -5%;
      clip-path: polygon(100% 0, 0 50%, 100% 100%);
      box-shadow:
        inset 8px 0 16px rgba(0,0,0,.12),
        inset 0 8px 8px rgba(0,0,0,.06);
    }

    .bottom{
      position:absolute;
      left: 0; right: 0;
      bottom: 0;
      height: 62%;
      z-index: 3;
    }
    .bottom:before{
      content:"";
      position:absolute;
      left: 0; right: 0; bottom: 0;
      height: 100%;
      background:
        linear-gradient(0deg, rgba(0,0,0,.04) 0%, transparent 25%),
        linear-gradient(180deg, #e8dcc8 0%, #d5c4ab 100%);
      clip-path: polygon(0 100%, 50% 0, 100% 100%);
      box-shadow:
        inset 0 -8px 16px rgba(0,0,0,.08),
        0 -2px 0 rgba(0,0,0,.06);
    }

    .seal{
      position:absolute;
      left: 50%;
      top: 52%;
      transform: translate(-50%,-50%);
      width: 90px;
      height: 90px;
      z-index: 6;
      transition: opacity 450ms ease, transform 650ms cubic-bezier(.2,.9,.2,1);
      filter: drop-shadow(0 6px 12px rgba(0,0,0,.25));
    }
    .seal img{
      width: 100%;
      height: 100%;
      display: block;
    }

    /* === LETTRE (dans l‚Äôenveloppe) === */
    .letter{
      position:absolute;
      left: 50%;
      bottom: 20px;
      transform: translateX(-50%) translateY(70px) scaleY(.30);
      width: 88%;
      height: 86%;
      background: linear-gradient(180deg, #fff 0%, #f8f8f8 100%);
      border-radius: 10px;
      box-shadow:
        0 14px 22px rgba(0,0,0,.15),
        inset 0 0 0 1px rgba(0,0,0,.06);
      z-index: 1;
      opacity: 0;
      transition:
        opacity 350ms ease,
        transform 1200ms cubic-bezier(.18,.95,.18,1);
      overflow: hidden;
    }

    /* pli (unfold) */
    .fold{
      position:absolute;
      left: 0; right: 0; top: 54%;
      height: 1px;
      background: linear-gradient(90deg, rgba(0,0,0,0), rgba(0,0,0,.12), rgba(0,0,0,0));
      opacity: .65;
    }

    /* mini contenu (juste d√©cor pendant sortie) */
    .letter-mini{
      padding: 14px 16px;
      color: rgba(0,0,0,.35);
      font-size: 12px;
      line-height: 1.25;
    }
    .letter-mini .line{
      height: 8px;
      margin: 8px 0;
      background: linear-gradient(90deg, rgba(0,0,0,.07), rgba(0,0,0,0));
      border-radius: 999px;
    }
    .letter-mini .line:nth-child(2){ width: 78%; }
    .letter-mini .line:nth-child(3){ width: 64%; }
    .letter-mini .line:nth-child(4){ width: 86%; }

    /* √âtat ouvert (animation) */
    .opened .flap{
      transform: rotateX(-155deg);
    }
    .opened .seal{
      opacity: 0;
      transform: translate(-50%,-60%) scale(.92);
    }
    .opened .letter{
      opacity: 1;
      transform: translateX(-50%) translateY(-20px) scaleY(1);
    }

    /* === PLEIN √âCRAN (PAGE LETTRE) === */
    .page{
      position: fixed;
      inset: 0;
      background: var(--paper);
      color: var(--ink);
      opacity: 0;
      pointer-events: none;
      transform: translateY(14px);
      transition: opacity 700ms ease, transform 700ms ease;
      overflow: auto;
      -webkit-overflow-scrolling: touch;
      padding:
        max(18px, env(safe-area-inset-top))
        18px
        max(22px, env(safe-area-inset-bottom))
        18px;
    }
    .page.show{
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }

    .paper{
      max-width: 640px;
      margin: 0 auto;
      padding: 24px 18px 32px;
    }

    .main-title{
      font-family: "Great Vibes", cursive;
      color: var(--accent);
      font-size: clamp(44px, 7vw, 64px);
      line-height: 1;
      margin: 0 0 8px;
      text-align: center;
      font-weight: 400;
      letter-spacing: .2px;
    }

    .ornament{
      text-align: center;
      margin: 18px 0 32px;
      position: relative;
    }
    .ornament:before,
    .ornament:after{
      content: "";
      position: absolute;
      top: 50%;
      width: 32%;
      height: 1px;
      background: linear-gradient(90deg, rgba(0,0,0,0), rgba(0,0,0,.15));
    }
    .ornament:before{
      left: 0;
    }
    .ornament:after{
      right: 0;
      background: linear-gradient(90deg, rgba(0,0,0,.15), rgba(0,0,0,0));
    }
    .ornament-icon{
      display: inline-block;
      color: var(--accent);
      font-size: 18px;
      opacity: .5;
    }

    .section{
      margin: 28px 0 36px;
      padding: 0;
    }

    .section-title{
      font-family: "Great Vibes", cursive;
      color: var(--ink);
      font-size: 40px;
      line-height: 1;
      margin: 0 0 12px;
      font-weight: 400;
      text-align: center;
    }

    .section-text{
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      font-weight: 300;
      font-size: 17px;
      line-height: 1.55;
      margin: 0;
      white-space: pre-line;
      color: var(--ink);
      text-align: center;
    }

    .section-img{
      display: block;
      width: 100%;
      max-width: 100%;
      height: auto;
      margin-top: 12px;
      border-radius: 12px;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.04);
    }

    
    .divider{
      margin: 42px auto;
      max-width: 200px;
      height: 1px;
      background: linear-gradient(90deg, rgba(0,0,0,0), var(--accent) 20%, var(--accent) 80%, rgba(0,0,0,0));
      opacity: .3;
      position: relative;
    }
    .divider:before,
    .divider:after{
      content: "‚óÜ";
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      color: var(--accent);
      font-size: 8px;
      opacity: .6;
    }
    .divider:before{
      left: -8px;
    }
    .divider:after{
      right: -8px;
    }

    /* petit ‚Äútap‚Äù indicateur discret */
    .tap{
      position: absolute;
      bottom: max(14px, env(safe-area-inset-bottom));
      left: 0; right: 0;
      text-align: center;
      font-size: 12px;
      letter-spacing: .3px;
      color: rgba(255,255,255,.8);
      text-shadow: 0 2px 10px rgba(0,0,0,.25);
      user-select: none;
      opacity: .95;
    }

    /* Accessibilit√© : r√©duire animations si demand√© */
    @media (prefers-reduced-motion: reduce){
      .clouds, .clouds:before, .clouds:after{ animation: none; }
      .flap, .seal, .letter, .page{ transition: none; }
    }
  </style>
</head>

<body>
  <div class="scene" id="scene">
    <div class="clouds" aria-hidden="true"></div>

    <div class="hint">Azy ouvre l‚Äôenveloppe nainguy</div>

    <div class="stage">
      <div class="envelope-wrap" id="envelopeWrap" role="button" aria-label="Ouvrir l'enveloppe">
        <div class="envelope" id="envelope">
          <div class="letter" id="letter">
            <div class="letter-mini" aria-hidden="true">
              <div class="line"></div>
              <div class="line"></div>
              <div class="line"></div>
              <div class="line"></div>
            </div>
            <div class="fold" aria-hidden="true"></div>
          </div>

          <div class="side" aria-hidden="true"></div>
          <div class="bottom" aria-hidden="true"></div>

          <div class="flap" aria-hidden="true"></div>

          <div class="seal" id="seal" aria-hidden="true">
            <img src="public/sceau_l-removebg-preview.png" alt="Sceau" draggable="false">
          </div>
        </div>
      </div>
    </div>

    <div class="tap">Touchez l‚Äôenveloppe</div>
  </div>

  <main class="page" id="page" aria-hidden="true">
    <div class="paper">
      <h1 class="main-title">Samedi 31 Janvier</h1>
      <div class="ornament"><span class="ornament-icon">‚ùß</span></div>

      <section class="section">
        <h2 class="section-title">Exposition des Flops</h2>
        <p class="section-text">14h | Mus√©e des Arts &amp; M√©tiers
Heure de fin  estim√©e : 15h30</p>
        
<img class="section-img" src="public/maps.jpg" alt="Plan d'acc√®s">
      </section>

      <section class="section">
        <h2 class="section-title">Maaatch</h2>
        <p class="section-text">17h | Paris FC (L√∫) vs Olympique de Marseille (Logan)</p>
        <img class="section-img" src="public/loulou&lo.png" alt="L√∫ et Logan">
      </section>

      <div class="divider"></div>

      <h1 class="main-title">Optionnel (Invitation)</h1>
      <div class="ornament"><span class="ornament-icon">‚ùß</span></div>

      <section class="section">
        <h2 class="section-title">Le poulet qui chiale ses grands morts</h2>
        <p class="section-text">12h OU 19h | D√©gustation d'un met divin avant musestre OU apr√®s le match</p>
      </section>
    </div>
  </main>

<audio id="bgm" preload="auto">
  <source src="public/Naika-BLOOM-remix.mp3" type="audio/mpeg">
</audio>

<script>
(function(){

  const wrap = document.getElementById('envelopeWrap');
  const envelope = document.getElementById('envelope');
  const page = document.getElementById('page');
  const bgm = document.getElementById('bgm');

  let opened = false;

  function openEnvelope(e){
    if (opened) return;
    opened = true;

    // üéµ LANCEMENT AUDIO ‚Äî DIRECTEMENT DANS LE TAP (OBLIGATOIRE POUR SAFARI)
    if (bgm) {
      bgm.volume = 1.0;
      bgm.currentTime = 0;
      bgm.play().catch(err => {
        console.log("Audio bloqu√© par Safari :", err);
      });
    }

    // animation enveloppe
    envelope.classList.add('opened');

    // ouverture page apr√®s animation
    setTimeout(() => {
      page.classList.add('show');
      page.setAttribute('aria-hidden', 'false');
    }, 1350);
  }

  // ‚ö†Ô∏è UN SEUL LISTENER (important pour iOS)
  wrap.addEventListener('touchend', openEnvelope);
  wrap.addEventListener('click', openEnvelope);

})();
</script>


</body>
</html>
